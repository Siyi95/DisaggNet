# DisaggNet é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶ç»“æ„ï¼ˆå·²ä¼˜åŒ–ï¼‰

```
DisaggNet/
â”œâ”€â”€ ğŸ“Š æ•°æ®å¤„ç†ï¼ˆæœ€ä½³å®è·µï¼‰
â”‚   â””â”€â”€ src/nilm_disaggregation/data/
â”‚       â”œâ”€â”€ robust_dataset.py          # âœ… å”¯ä¸€æ•°æ®é›†å®ç°ï¼ˆé›†æˆ6å¤§é˜²æ³„æ¼æŠ€æœ¯ + PyTorch Lightningï¼‰
â”‚       â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ ğŸ“– æ–‡æ¡£å’ŒæŒ‡å—
â”‚   â”œâ”€â”€ README_æ—¶åºæ•°æ®æ³„æ¼é˜²æŠ¤æŠ€æœ¯è¯¦è§£.md    # ğŸ“š æŠ€æœ¯è¯¦è§£æ–‡æ¡£
â”‚   â”œâ”€â”€ NILM_æœ€ä½³å®è·µä½¿ç”¨æŒ‡å—.md           # ğŸš€ ä½¿ç”¨æŒ‡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ é¡¹ç›®ç»“æ„è¯´æ˜.md                   # ğŸ“‹ æœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ README_FINAL.md                  # ğŸ“„ æœ€ç»ˆè¯´æ˜
â”‚   â””â”€â”€ README.md                        # ğŸ“„ åŸºç¡€è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ§ª æ¼”ç¤ºå’Œæµ‹è¯•
â”‚   â””â”€â”€ demo_robust_dataset.py           # âœ… æ¼”ç¤ºè„šæœ¬ï¼ˆå·²æ›´æ–°ï¼‰
â”‚
â”œâ”€â”€ ğŸ¯ æ¨¡å‹å’Œè®­ç»ƒ
â”‚   â”œâ”€â”€ enhanced_transformer_nilm_model.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ debug_simple_train.py
â”‚   â””â”€â”€ src/nilm_disaggregation/
â”‚       â”œâ”€â”€ models/
â”‚       â”œâ”€â”€ training/
â”‚       â””â”€â”€ utils/
â”‚
â”œâ”€â”€ ğŸ“Š æ•°æ®å’Œé…ç½®
â”‚   â”œâ”€â”€ Dataset/dataverse_files/         # ğŸ—ƒï¸ AMPds2æ•°æ®é›†
â”‚   â”œâ”€â”€ configs/default_config.yaml     # âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ requirements.txt                 # ğŸ“¦ ä¾èµ–åŒ…
â”‚
â””â”€â”€ ğŸ“ˆ è¾“å‡ºç»“æœ
    â””â”€â”€ outputs/robust_dataset_demo/
        â””â”€â”€ walk_forward_validation.png  # ğŸ–¼ï¸ å¯è§†åŒ–ç»“æœ
```

## ğŸ—‘ï¸ å·²åˆ é™¤çš„è¿‡æ—¶æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å·²è¢«åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬åŒ…å«è¿‡æ—¶çš„å®ç°æˆ–å­˜åœ¨æ•°æ®æ³„æ¼é—®é¢˜ï¼š

- âŒ `complete_ampds2_dataset.py` - å¤æ‚ä½†ä¸å®Œæ•´çš„å®ç°
- âŒ `csv_data_loader.py` - CSVæ ¼å¼åŠ è½½å™¨ï¼ˆåŠŸèƒ½é‡å¤ï¼‰
- âŒ `dataset.py` - åŸå§‹æ•°æ®é›†å®ç°ï¼ˆå­˜åœ¨æ³„æ¼é—®é¢˜ï¼‰
- âŒ `demo_complete_dataset_usage.py` - è¿‡æ—¶çš„æ¼”ç¤ºè„šæœ¬
- âŒ `explore_ampds2_structure.py` - æ•°æ®æ¢ç´¢è„šæœ¬ï¼ˆä¸€æ¬¡æ€§ä½¿ç”¨ï¼‰
- âŒ `improved_dataset.py` - ä¸­é—´ç‰ˆæœ¬å®ç°ï¼ˆå·²è¢«robust_dataset.pyæ›¿ä»£ï¼‰
- âŒ `datamodule.py` - å…¼å®¹æ€§æ–‡ä»¶ï¼ˆå·²é›†æˆåˆ°robust_dataset.pyä¸­ï¼‰

## âœ… ä¿ç•™çš„æ ¸å¿ƒæ–‡ä»¶

### 1. `robust_dataset.py` - å”¯ä¸€æ•°æ®é›†å®ç°
**åŒ…å«æ‰€æœ‰6å¤§é˜²æ³„æ¼æŠ€æœ¯ + PyTorch Lightningé›†æˆï¼š**
- ğŸ”’ Purged/Embargo Walk-Forward äº¤å‰éªŒè¯
- ğŸ“Š å…ˆåˆ†å‰²åé¢„å¤„ç†
- ğŸ¯ éªŒè¯é›†éé‡å çª—å£
- ğŸ“ˆ è®­ç»ƒé›†å°æ­¥é•¿é‡‡æ ·
- âš–ï¸ è‡ªé€‚åº”é˜ˆå€¼ä¼˜åŒ–
- ğŸ” ç‰¹å¾å·¥ç¨‹åˆ†ç‰‡å†…ç‹¬ç«‹
- âš¡ PyTorch Lightning LightningDataModuleé›†æˆ

### 2. `demo_robust_dataset.py` - æ¼”ç¤ºè„šæœ¬
**åŠŸèƒ½ï¼š**
- å±•ç¤ºæ‰€æœ‰6ä¸ªé˜²æ³„æ¼æŠ€æœ¯
- ç”Ÿæˆå¯è§†åŒ–å¯¹æ¯”å›¾è¡¨
- æä¾›å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹
- PyTorch Lightningé›†æˆæ¼”ç¤º

## ğŸš€ ä½¿ç”¨å»ºè®®

### æ–°é¡¹ç›®å¼€å‘
```python
# ç›´æ¥ä½¿ç”¨æœ€ä½³å®è·µ
from src.nilm_disaggregation.data.robust_dataset import RobustNILMDataModule

data_module = RobustNILMDataModule(
    data_path='path/to/data.h5',
    cv_mode=True,           # å¯ç”¨Walk-Forward
    train_stride=1,         # è®­ç»ƒé›†å°æ­¥é•¿
    val_stride=64          # éªŒè¯é›†éé‡å 
)
```

### ç°æœ‰é¡¹ç›®è¿ç§»
```python
# ä»æ—§çš„æ•°æ®é›†è¿ç§»
# æ—§ä»£ç ï¼š
# from src.nilm_disaggregation.data.dataset import RealAMPds2Dataset

# æ–°ä»£ç ï¼š
from src.nilm_disaggregation.data.robust_dataset import RobustAMPds2Dataset

# äº«å—æ‰€æœ‰é˜²æ³„æ¼ä¿æŠ¤ï¼
```

## ğŸ“Š æŠ€æœ¯å¯¹æ¯”æ€»ç»“

| æŠ€æœ¯ç‰¹æ€§ | è¿‡æ—¶å®ç° | æœ€ä½³å®è·µ |
|---------|---------|----------|
| æ•°æ®åˆ†å‰² | ç®€å•æ—¶é—´åˆ†å‰² | âœ… Purged/Embargo Walk-Forward |
| é¢„å¤„ç† | å…¨å±€æ ‡å‡†åŒ– | âœ… å…ˆåˆ†å‰²åé¢„å¤„ç† |
| é‡‡æ ·ç­–ç•¥ | å›ºå®šæ­¥é•¿ | âœ… å·®å¼‚åŒ–é‡‡æ ·ï¼ˆè®­ç»ƒ1ï¼ŒéªŒè¯64ï¼‰ |
| é˜ˆå€¼è®¡ç®— | å›ºå®š75%åˆ†ä½æ•° | âœ… è®¾å¤‡ç‰¹å®šè‡ªé€‚åº”é˜ˆå€¼ |
| äº¤å‰éªŒè¯ | éšæœºKæŠ˜ | âœ… æ—¶åºæ„ŸçŸ¥Walk-Forward |
| ç‰¹å¾å·¥ç¨‹ | å…¨å±€ç»Ÿè®¡ | âœ… åˆ†ç‰‡å†…ç‹¬ç«‹è®¡ç®— |

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **é˜…è¯»ä½¿ç”¨æŒ‡å—**: `NILM_æœ€ä½³å®è·µä½¿ç”¨æŒ‡å—.md`
2. **è¿è¡Œæ¼”ç¤º**: `python demo_robust_dataset.py`
3. **æŸ¥çœ‹å¯è§†åŒ–**: `outputs/robust_dataset_demo/walk_forward_validation.png`
4. **å¼€å§‹ä½¿ç”¨**: æŒ‰ç…§æŒ‡å—é›†æˆåˆ°æ‚¨çš„é¡¹ç›®ä¸­

## ğŸ’¡ å…³é”®ä¼˜åŠ¿

- âœ… **é›¶æ•°æ®æ³„æ¼**: 6å±‚é˜²æŠ¤ç¡®ä¿æ¨¡å‹çœŸå®æ€§èƒ½
- âœ… **æ ‡ç­¾ä¼˜åŒ–**: è‡ªé€‚åº”é˜ˆå€¼æå‡æ£€æµ‹ç²¾åº¦
- âœ… **æ—¶åºä¸¥æ ¼**: Walk-Forwardæ¨¡æ‹ŸçœŸå®éƒ¨ç½²
- âœ… **ä»£ç ç®€æ´**: å•ä¸€å®ç°æ›¿ä»£å¤šä¸ªè¿‡æ—¶æ–‡ä»¶
- âœ… **æ˜“äºä½¿ç”¨**: ä¸€è¡Œä»£ç å¯ç”¨æ‰€æœ‰é˜²æŠ¤

ç°åœ¨æ‚¨çš„é¡¹ç›®æ‹¥æœ‰äº†ä¸šç•Œæœ€å…ˆè¿›çš„NILMæ•°æ®å¤„ç†ç®¡é“ï¼ğŸš€